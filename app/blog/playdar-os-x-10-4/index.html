<!doctype html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
	
	<title>Installing Playdar on OS X 10.4 - David Singleton</title>

    <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    	
    <meta name="description" content="The blog of David Singleton, Ramblings of a Web Developer" />
    <meta name="keywords" content="david singleton, dave singleton, web developer, london, css, php, lamp, mysql, unix, programming, web standards, coding, microformats, web sites, angry rants" />
    <meta name="author" content="David Singleton" />
    <meta name="robots" content="index, follow" />

    <meta name="viewport" content="initial-scale=1.0, width=device-width, maximum-scale=1.0"/>

    <link rel="stylesheet" href="/static/css/less.css" type="text/css" />
    <link rel="stylesheet" href="/static/css/base.css" type="text/css" />
    <link rel="stylesheet" href="/static/css/typography.css" type="text/css" />
    
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
    

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    

</head>

<body>
    
    <div id="page">

        <header>
            <p>
                <span class="myname">
                    <a class="name" href="/" ><span class="firstname">David</span> <span class="lastname">Singleton</span></a>
                </span>
                <span class="aboutme">
                    A <span class="title">web developer</span>
                    living in <span class="adr"><span class="locality">London</span></span>
                    and working at <a href="http://last.fm">Last.fm</a>.
                </span>
                <span class="tagline">I occasionally write a <a href="/blog">blog</a> and publish some <a href="/code">code</a>, find out <a href="/about">more &raquo;</a></span>
            </p>

        </header>

        
<article class="blog-entry">
        <h1>Installing Playdar on OS X 10.4</h1>
        <p>Congrutulations, you&#8217;re on an outdated verison of OS X, but you still want to play with cool things like Playdar. Here&#8217;s a hassle filled guide to compiling it from source.</p>

<p>To do this you&#8217;ll need XCode (2.4 for Tiger), Macports and Git to start.</p>

<p>XCode 2.4: <a href="https://connect.apple.com/cgi-bin/WebObjects/MemberSite.woa/wa/getSoftware?bundleID=20262">https://connect.apple.com/cgi-bin/WebObjects/MemberSite.woa/wa/getSoftware?bundleID=20262</a></p>

<p>MacPorts: <a href="http://www.macports.org/install.php">http://www.macports.org/install.php</a></p>

<p>Git: <a href="http://metastatic.org/source/git-osx.html">http://metastatic.org/source/git-osx.html</a></p>

<p>Once you&#8217;ve got those tools installed you can focus on Playdar itself. First, we need to load Playdar specific dependecies via mac ports. This is easy, but takes a little while.</p>

<pre><code>$ sudo port install cmake boost ossp-uuid uriparser taglib git-core sqlite3
</code></pre>

<p>Next grab playdar from Git;</p>

<pre><code>$ git clone git://github.com/RJ/playdar.git
$ cd playdar
</code></pre>

<p>Now to build it from source.</p>

<pre><code>$ cd build
$ cmake ..
</code></pre>

<p>I&#8217;m not 100% sure this is a 10.4 specific issue, but i&#8217;ve had the same thing happen on two machines. CMake will find an old version of sqlite that won&#8217;t compile with Playdar. The quickest hack is to move/backup the &#8220;incorrect&#8221;, sym-link the correct version in it&#8217;s place and then make as normal.</p>

<pre><code>$ sudo mv /usr/lib/libsqlite3.dylib{,.bk}
$ sudo ln -s /opt/local/lib/libsqlite3.dylib /usr/lib/libsqlite3.dylib
</code></pre>

<p>Finally we can compile the playdar bin itself.
$ make</p>

<p>Undo our sqlite path hack (if you had to do it)</p>

<pre><code>$ sudo mv -f /usr/lib/libsqlite3.dylib{.bk,} 
</code></pre>

<p>Make it!</p>

<pre><code>$ make
</code></pre>

<p>You should now have a playdar file in bin/. Hurrah, the hard bit is over now to do our DB setup and config.</p>

<pre><code>$ cd playdar 
</code></pre>

<p>I had this on one machine but not the other, use the normal instructions in INSTALL.txt unless you get an SQLite error about &#8220;NOT, in which case use this.</p>

<pre><code>$ sed 's/IF NOT EXISTS //' etc/schema.sql | sqlite3 ../collection.db
</code></pre>

<p>Load your music collection. Depending on the size this can take a while.</p>

<pre><code>$ ./bin/scanner ./collection.db ~/Music/MP3/
</code></pre>

<p>Run it.</p>

<pre><code>$ ./bin/playdar -c ./etc/playdar.conf
</code></pre>
        <p class="post-info">
            Posted on
            <abbr class="published" title="2009-04-09T16:03:00+02:00">Thursday April 9, 2009</abbr>
        </p>
        <p>Tagged:
        <ul class="tags">
                    <li rel="tag">osx</li>
                    <li rel="tag">playdar</li>
                    <li rel="tag">tiger</li>
                    <li rel="tag">code</li>
                </ul>
        </p>
</article>

<aside>
    <div class="recent posts">
        <h4>Recent posts</h4>
        <ul class="posts">
                    <li><a href="/blog/scrobbling-heatmap-calendar">Scrobbling Heatmap Calendar</a></li>
                    <li><a href="/blog/last-fm-now-playing-information-radiator">Last.fm Now-Playing information radiator</a></li>
                    <li><a href="/blog/leaving-last-fm">Leaving Last.fm</a></li>
                    <li><a href="/blog/facebook-photo-facial-recognition">Facebook photo facial recognition</a></li>
                    <li><a href="/blog/entitlement-artificial-scarcity-spotify">Artificial Scarcity and Entitlement</a></li>
                    <li><a href="/blog/migrating-scrobbling-authentication-to-2-0">Migrating scrobbling authentication to 2.0</a></li>
                    <li><a href="/blog/erlang-beginners-tutorial">Erlang: For an absolute beginner</a></li>
                    <li><a href="/blog/tech-hub-misrepresents-silicon-roundabout">Tech Hub misrepresents Silicon Roundabout</a></li>
                    <li><a href="/blog/virtualised-development-environments">The importance of virtualised development environments</a></li>
                    <li><a href="/blog/new-twitter-favouritism">New Twitter favouritism</a></li>
                </ul>
        
        <p><a href="/blog">More&hellip;</p>
    </div>
</aside>

</article>

        <footer id="footer">
            <ul>
                <li class="twitter"><a href="http://twitter.com/dsingleton">Follow me on twitter</a></li>
            </ul> 
        </footer>

    </div><!-- /#page -->

<!-- Analytics tracking code -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
<script type="text/javascript">_uacct = "UA-609105-1"; urchinTracker();</script>  

</body>
</html>
